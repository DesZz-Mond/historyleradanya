<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Даня + Лера: Наша История</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root {
            --tg-circle-size: 200px;
            --accent-color: #ff4d6d;
        }

        body {
            background: #0f0f0f;
            color: #ffffff;
            font-family: 'Montserrat', sans-serif;
            overflow-x: hidden;
        }

        .romantic-font {
            font-family: 'Great Vibes', cursive;
        }

        /* Анимация появления при скролле */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Стиль видео-кружочков Telegram */
        .video-note-container {
            width: var(--tg-circle-size);
            height: var(--tg-circle-size);
            border-radius: 50%;
            overflow: hidden;
            border: 4px solid var(--accent-color);
            position: relative;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 77, 109, 0.4);
            margin: 0 auto;
            background: #000;
        }

        .video-note-container video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .video-controls {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.5);
            border-radius: 50%;
            padding: 10px;
            display: none;
            pointer-events: none;
        }

        .video-note-container:hover .video-controls {
            display: block;
        }

        /* Таймлайн */
        .timeline {
            position: relative;
            max-width: 800px;
            margin: 40px auto;
            padding-left: 20px;
        }

        .timeline::after {
            content: '';
            position: absolute;
            width: 2px;
            background: var(--accent-color);
            top: 0;
            bottom: 0;
            left: 50%;
            margin-left: -1px;
            opacity: 0.3;
        }

        @media (max-width: 768px) {
            .timeline::after { left: 20px; }
        }

        .event-card {
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            margin-bottom: 50px;
            width: 45%;
            position: relative;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .event-card.left { left: 0; }
        .event-card.right { left: 55%; }

        @media (max-width: 768px) {
            .event-card { width: 90%; left: 40px !important; }
        }

        .timer-unit {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0 10px;
        }

        .timer-val {
            font-size: 2rem;
            font-weight: 600;
            color: var(--accent-color);
        }

        .timer-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            opacity: 0.7;
        }

        /* Фотографии */
        .photo-frame {
            border-radius: 15px;
            overflow: hidden;
            margin-top: 15px;
            border: 1px solid rgba(255,255,255,0.2);
            transition: transform 0.3s ease;
        }

        .photo-frame:hover {
            transform: scale(1.02);
        }

        .photo-frame img {
            width: 100%;
            display: block;
        }

        /* Поэзия */
        .poem-block {
            font-style: italic;
            color: #ffb3c1;
            line-height: 1.6;
            border-left: 2px solid var(--accent-color);
            padding-left: 15px;
            margin: 15px 0;
        }

        /* Скроллбар */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f0f0f; }
        ::-webkit-scrollbar-thumb { background: var(--accent-color); border-radius: 4px; }
    </style>
</head>
<body>

    <!-- Шапка с таймером -->
    <header class="min-h-screen flex flex-col justify-center items-center text-center p-5 relative">
        <div class="absolute inset-0 z-0 overflow-hidden pointer-events-none" id="hearts-bg"></div>
        
        <h1 class="romantic-font text-7xl md:text-9xl text-pink-500 mb-4 z-10 animate-pulse">Даня & Лера</h1>
        <p class="text-xl opacity-80 mb-12 z-10">История, которая началась 27 августа 2025 года</p>

        <div id="main-timer" class="flex flex-wrap justify-center z-10 bg-black/40 p-8 rounded-3xl backdrop-blur-md">
            <!-- Сюда JS вставит время -->
        </div>
        
        <div class="mt-20 animate-bounce z-10">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
        </div>
    </header>

    <main class="timeline container mx-auto px-4 pb-20" id="content-flow">
        <!-- Сюда рендерятся события из JS -->
    </main>

    <footer class="text-center p-10 opacity-50">
        <p class="romantic-font text-3xl">Продолжение следует...</p>
        <p class="mt-4">Люблю тебя больше тысячи тысяч солнц</p>
    </footer>

    <script>
        // --- КОНФИГУРАЦИЯ ---
        const startDate = new Date('2025-08-27T22:57:15');
        
        // Функция для корректных ссылок Google Drive
        const getDriveUrl = (id) => `https://drive.google.com/uc?export=view&id=${id}`;

        // --- ДАННЫЕ ХРОНОЛОГИИ ---
        const events = [
            {
                date: '6 сентября 2025',
                title: 'Первая встреча',
                side: 'left',
                content: [
                    { type: 'video', src: 'первая встреча.mp4', label: 'первая встреча.mp4' },
                    { type: 'photo', src: getDriveUrl('1LKlLc95WqJg7xeKoWoJMZlDOmWtBA_ph'), label: 'первое фото.jpg' },
                    { type: 'text', text: 'В этот же вечер случились наши первые обнимашки.' },
                    { type: 'video', src: 'Первые обнимашки.mp4', label: 'Первые обнимашки.mp4' }
                ]
            },
            {
                date: '8 сентября 2025',
                title: 'Вторая встреча',
                side: 'right',
                content: [
                    { type: 'text', text: 'Встретились через два дня.' },
                    { type: 'video', src: 'вторые обнимашки.mp4', label: 'вторые обнимашки.mp4' }
                ]
            },
            {
                date: '12 сентября 2025',
                title: 'Официально вместе ❤️',
                side: 'left',
                content: [
                    { type: 'text', text: '15:10:58 — момент, когда мы стали парой официально.' }
                ]
            },
            {
                date: 'Сентябрь 2025',
                title: 'Продолжение сентября',
                side: 'right',
                content: [
                    { type: 'video', src: 'завариваем чайочек 16 сентября.mp4', label: '16 сентября' },
                    { type: 'video', src: 'Тигрица богиня 17 сентября.mp4', label: '17 сентября' },
                    { type: 'video', src: 'в переодевалке 18 сентября.mp4', label: '18 сентября' },
                    { type: 'video', src: 'После прогулки по киеву вечером 19 сентября.mp4', label: '19 сентября' },
                    { type: 'video', src: 'топаем на дополнительное 20 сентября.mp4', label: '20 сентября' },
                    { type: 'video', src: 'на дне рождения 21 сентября.mp4', label: '21 сентября' },
                    { type: 'text', text: '24 сентября — первый звонок по телефону. 25 сентября — первый видеозвонок.' },
                    { type: 'video', src: 'милые волосы 26 сентября.mp4', label: '26 сентября' }
                ]
            },
            {
                date: '28 сентября 2025',
                title: 'Первый поцелуй (от Леры)',
                side: 'left',
                content: [
                    { type: 'text', text: 'Утро, которое мы никогда не забудем.' },
                    { type: 'video', src: 'первый поцелуйчик на кружочек 28 сентября.mp4' },
                    { type: 'text', text: 'Реакция Дани:' },
                    { type: 'video', src: 'реакция на поцелуйчик.mp4' },
                    { type: 'video', src: 'красавица) 28 сентября.mp4' },
                    { type: 'text', text: 'А позже, в пономарке на службе — первый поцелуй от Дани.' },
                    { type: 'video', src: 'в пономарке на службе 28 сентября.mp4' }
                ]
            },
            {
                date: '3 - 12 октября 2025',
                title: 'Октябрьские моменты',
                side: 'right',
                content: [
                    { type: 'video', src: 'тоже поцелуйчик 3 октября.mp4' },
                    { type: 'video', src: 'поцелуйчик от леры.mp4' },
                    { type: 'video', src: '5 октября прическа.mp4' },
                    { type: 'video', src: 'просто даня в зеркале.mp4' },
                    { type: 'photo', src: getDriveUrl('1A90B4jd4roM96b5MZy20Dl3Dp4LOF2Xc'), label: 'На дне рождения подруги' },
                    { type: 'video', src: 'сонная лерочка.mp4', label: '7 октября' },
                    { type: 'video', src: 'На море.mp4', label: 'Кружочек с моря' },
                    { type: 'poem', text: 'ты свет в моем мире, как солнышко утром\nсмотрю на тебя и не верю ничуть\nты просто прекрасна и в сердце так шумно\nлюблю тебя очень, вот в чем вся моя суть' }
                ]
            },
            {
                date: '11 - 12 октября 2025',
                title: 'Поэзия и чувства',
                side: 'left',
                content: [
                    { type: 'video', src: '11 октября.mp4' },
                    { type: 'poem', text: 'смотрю в твои глаза, и мир затих,\nи этот миг только для нас двоих\nодна лишь мысль мне голову свела\nкак же хочется тебя поцеловать.\n\nНе просто губ коснуться на мгновенье\nа выпить всё твоё сердцебиенье\nчтоб в этом поцелуе утонуть\nи в новый, общий мир открыть нам путь' },
                    { type: 'poem', text: 'Вот забыть все то что сказано и спето...\n(и далее по тексту вашего прекрасного стиха)' },
                    { type: 'video', src: 'Еще милый поцелуйчик.mp4', label: '12 октября' }
                ]
            },
            {
                date: '18 октября 2025',
                title: 'Встреча после месяца онлайн',
                side: 'right',
                content: [
                    { type: 'text', text: 'День был особенным. В 13:08 — первый поцелуй в жизни (не на камеру).' },
                    { type: 'video', src: 'первый поцелуй.mp4' },
                    { type: 'photo', src: getDriveUrl('1s1rg3n9zHZ9n9C6Q8qs8zur49r0XiQxs'), label: 'в тейсти.jpg' },
                    { type: 'photo', src: getDriveUrl('1DNc6Lma11Ezojr9K-blqU7LXzJqNtNEN'), label: 'фото поцелуя.jpg' },
                    { type: 'video', src: 'поцелуй в парке.mp4' },
                    { type: 'text', text: 'Купили блокнотики расстояния.' }
                ]
            },
            {
                date: '29 октября 2025',
                title: 'Обмен блокнотиками', side: 'left',
                content: [
                    { type: 'video', src: 'поменялись блокнотиками.mp4' },
                    { type: 'video', src: 'целуемся.mp4' },
                    { type: 'photo', src: getDriveUrl('1SaVPfG2GZhlxH5zb5FJPdOIRZvmrV5tV'), label: 'За ручки' },
                    { type: 'photo', src: getDriveUrl('1GrDdnNo9FFYlBZoebE4xBTn-lBqeLfZS'), label: 'совместная.jpg' },
                    { type: 'video', src: 'резиночка от лерочки.mp4' },
                    { type: 'video', src: 'резиночка от данечки.mp4' }
                ]
            },
            {
                date: 'Ноябрь 2025',
                title: 'Ноябрьская страсть', side: 'right',
                content: [
                    { type: 'poem', text: 'Моя душа полыхает ярче тысячу тысяч солнц... ты моя абсолютная неповторимая катастрофа счастья.' },
                    { type: 'photo', src: getDriveUrl('1HK03PakyVAH2137o_UZoG-yFJxr7zDb4'), label: 'Даня в зеркале' },
                    { type: 'photo', src: getDriveUrl('1lfDV7pLtPX1ZFKUwryCsNp0NJgtvPsD1'), label: 'Лера на море' },
                    { type: 'video', src: 'В общаге.mp4', label: '15 ноября' },
                    { type: 'video', src: 'целуемся)).mp4' },
                    { type: 'photo', src: getDriveUrl('1zVrfExstB5yw20Fx90lKPMaYt0cOyX9w'), label: 'Парк Совки' }
                ]
            },
            {
                date: '16 ноября 2025',
                title: 'Куууча фоточек в парке', side: 'left',
                content: [
                    { type: 'text', text: 'Тот самый день, когда мы сделали очень много снимков.' },
                    { type: 'photo', src: getDriveUrl('1m8P-rdg02Cs-FWiG6wIHHSn3LUlOh5eI'), label: 'Фото 1' },
                    { type: 'photo', src: getDriveUrl('1XJ3x9Fe_Hyp_oJeNpybbVaI3staeSllX'), label: 'Фото 2' },
                    { type: 'video', src: 'баскетболист.mp4' },
                    { type: 'video', src: 'на вокзале.mp4' }
                ]
            },
            {
                date: 'Декабрь 2025',
                title: 'Первый снег', side: 'right',
                content: [
                    { type: 'video', src: 'милые щечки.mp4', label: '5 декабря' },
                    { type: 'photo', src: getDriveUrl('1pRYB6jXESOP5ndwdlw_eoST8rowtOXY5'), label: '8 декабря' },
                    { type: 'video', src: 'кружочек.mp4', label: '14 декабря - Снег!' },
                    { type: 'photo', src: getDriveUrl('1WO1RDHFAebPkM2rE3dy39u7BtHS2hju3'), label: 'Возле храма' }
                ]
            },
            {
                date: '1 января 2026',
                title: 'Новый Год', side: 'left',
                content: [
                    { type: 'poem', text: 'Поздравление Дани: "Любимая моя зайка с новым годом! ... ТЫСЯЧИ ТЫСЯЧ РАЗ ЛЮБЛЮ"' },
                    { type: 'poem', text: 'Поздравление Леры: "Поздравляю тебя, мой лучик света... я тебя очень люблю мой зайчонок"' }
                ]
            },
            {
                date: 'Январь - Февраль 2026',
                title: 'У Дани дома и прекрасные платья', side: 'right',
                content: [
                    { type: 'photo', src: getDriveUrl('17uVj38RQXR78MANz7ljbE4C_UjKwOFD-'), label: '10 января - Дома' },
                    { type: 'video', src: 'лерочка в прекрасном платьишке.mp4' },
                    { type: 'video', src: 'поцелуйчик пытается вырваться наружу.mp4', label: '2 февраля' },
                    { type: 'photo', src: getDriveUrl('1ogqHGdWicO89pYo3EpnxxPiptPZiMZwH'), label: '7 февраля' }
                ]
            }
        ];

        // --- ЛОГИКА ТАЙМЕРА ---
        function updateTimer() {
            const now = new Date();
            const diff = now - startDate;

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const mins = Math.floor((diff / (1000 * 60)) % 60);
            const secs = Math.floor((diff / 1000) % 60);

            const timerEl = document.getElementById('main-timer');
            if (timerEl) {
                timerEl.innerHTML = `
                    <div class="timer-unit"><span class="timer-val">${days}</span><span class="timer-label">дней</span></div>
                    <div class="timer-unit"><span class="timer-val">${hours}</span><span class="timer-label">часов</span></div>
                    <div class="timer-unit"><span class="timer-val">${mins}</span><span class="timer-label">минут</span></div>
                    <div class="timer-unit"><span class="timer-val">${secs}</span><span class="timer-label">секунд</span></div>
                `;
            }
        }

        // --- РЕНДЕР КОНТЕНТА ---
        function renderTimeline() {
            const container = document.getElementById('content-flow');
            
            events.forEach(event => {
                const card = document.createElement('div');
                card.className = `event-card ${event.side} reveal`;
                
                let contentHtml = `<h3 class="text-pink-500 font-bold text-xl mb-2">${event.date}</h3>`;
                contentHtml += `<h4 class="text-white text-lg mb-4 opacity-90">${event.title}</h4>`;

                event.content.forEach(item => {
                    if (item.type === 'video') {
                        contentHtml += `
                            <div class="mt-4 mb-4 text-center">
                                <div class="video-note-container" onclick="toggleVideo(this)">
                                    <video loop playsinline preload="metadata">
                                        <source src="${item.src}" type="video/mp4">
                                    </video>
                                    <div class="video-controls">
                                        <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
                                    </div>
                                </div>
                                <p class="text-xs opacity-50 mt-1 italic">${item.label || ''}</p>
                            </div>
                        `;
                    } else if (item.type === 'photo') {
                        contentHtml += `
                            <div class="photo-frame">
                                <img src="${item.src}" alt="${item.label}" loading="lazy" onerror="this.src='https://via.placeholder.com/400x300?text=Фото+загружается...'">
                                <p class="text-center text-xs p-2 opacity-60">${item.label || ''}</p>
                            </div>
                        `;
                    } else if (item.type === 'text') {
                        contentHtml += `<p class="mb-3 text-sm leading-relaxed">${item.text}</p>`;
                    } else if (item.type === 'poem') {
                        contentHtml += `<div class="poem-block text-sm whitespace-pre-line">${item.text}</div>`;
                    }
                });

                card.innerHTML = contentHtml;
                container.appendChild(card);
            });
        }

        // --- БЕЗОПАСНОЕ УПРАВЛЕНИЕ ВИДЕО (Фикс AbortError) ---
        async function toggleVideo(container) {
            const video = container.querySelector('video');
            const controls = container.querySelector('.video-controls');
            
            if (video.paused) {
                // Останавливаем все другие видео перед запуском текущего
                const allVideos = document.querySelectorAll('video');
                for (let v of allVideos) {
                    if (v !== video) {
                        v.pause();
                        const otherControls = v.closest('.video-note-container').querySelector('.video-controls');
                        if (otherControls) otherControls.style.display = 'block';
                    }
                }

                try {
                    // Пытаемся запустить видео
                    await video.play();
                    controls.style.display = 'none';
                } catch (err) {
                    // Игнорируем ошибку прерывания (AbortError), она не критична
                    if (err.name !== 'AbortError') {
                        console.error("Ошибка воспроизведения:", err);
                    }
                }
            } else {
                video.pause();
                controls.style.display = 'block';
            }
        }

        // --- АНИМАЦИЯ ПРИ СКРОЛЛЕ ---
        function handleScroll() {
            const reveals = document.querySelectorAll('.reveal');
            reveals.forEach(el => {
                const windowHeight = window.innerHeight;
                const elementTop = el.getBoundingClientRect().top;
                if (elementTop < windowHeight - 100) {
                    el.classList.add('active');
                }
            });
        }

        // --- СЕРДЕЧКИ НА ФОНЕ ---
        function createHeart() {
            const container = document.getElementById('hearts-bg');
            if (!container) return;
            const heart = document.createElement('div');
            heart.innerHTML = '❤️';
            heart.style.position = 'absolute';
            heart.style.left = Math.random() * 100 + 'vw';
            heart.style.top = '100vh';
            heart.style.fontSize = (Math.random() * 20 + 10) + 'px';
            heart.style.opacity = Math.random();
            heart.style.transition = `transform ${Math.random() * 5 + 5}s linear, opacity 5s`;
            
            container.appendChild(heart);

            setTimeout(() => {
                heart.style.transform = `translateY(-120vh) rotate(${Math.random() * 360}deg)`;
            }, 100);

            setTimeout(() => {
                heart.remove();
            }, 8000);
        }

        // --- ИНИЦИАЛИЗАЦИЯ ---
        window.onload = () => {
            updateTimer();
            setInterval(updateTimer, 1000);
            setInterval(createHeart, 500);
            renderTimeline();
            handleScroll();
            window.addEventListener('scroll', handleScroll);
        };
    </script>
</body>
</html>
